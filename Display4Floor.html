<!DOCTYPE html>
<!-- saved from url=(0053)http://10.1.131.92:8888/notebooks/Display4Floor.ipynb -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <title>Display4Floor</title>
    <link rel="shortcut icon" type="image/x-icon" href="http://10.1.131.92:8888/static/base/images/favicon.ico?v=97c6417ed01bdc0ae3ef32ae4894fd03">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="./Display4Floor_files/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="./Display4Floor_files/jquery.typeahead.min.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    


<script type="text/javascript" src="./Display4Floor_files/MathJax.js.下载" charset="utf-8"></script>

<script type="text/javascript">
// MathJax disabled, set as null to distingish from *missing* MathJax,
// where it will be undefined, and should prompt a dialog later.
window.mathjax_url = "/static/components/MathJax/MathJax.js";
</script>

<link rel="stylesheet" href="./Display4Floor_files/bootstrap-tour.min.css" type="text/css">
<link rel="stylesheet" href="./Display4Floor_files/codemirror.css">


    <link rel="stylesheet" href="./Display4Floor_files/style.min.css" type="text/css">
    

<link rel="stylesheet" href="./Display4Floor_files/override.css" type="text/css">
<link rel="stylesheet" href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb" id="kernel-css" type="text/css">


    <link rel="stylesheet" href="./Display4Floor_files/custom.css" type="text/css">
    <script src="./Display4Floor_files/promise.min.js.下载" type="text/javascript" charset="utf-8"></script>
    <script src="./Display4Floor_files/index.js.下载" type="text/javascript"></script>
    <script src="./Display4Floor_files/index.js(1).下载" type="text/javascript"></script>
    <script src="./Display4Floor_files/index.js(2).下载" type="text/javascript"></script>
    <script src="./Display4Floor_files/require.js.下载" type="text/javascript" charset="utf-8"></script>
    <script>
      require.config({
          
          urlArgs: "v=20180316082647",
          
          baseUrl: '/static/',
          paths: {
            'auth/js/main': 'auth/js/main.min',
            custom : '/custom',
            nbextensions : '/nbextensions',
            kernelspecs : '/kernelspecs',
            underscore : 'components/underscore/underscore-min',
            backbone : 'components/backbone/backbone-min',
            jquery: 'components/jquery/jquery.min',
            bootstrap: 'components/bootstrap/js/bootstrap.min',
            bootstraptour: 'components/bootstrap-tour/build/js/bootstrap-tour.min',
            'jquery-ui': 'components/jquery-ui/ui/minified/jquery-ui.min',
            moment: 'components/moment/moment',
            codemirror: 'components/codemirror',
            termjs: 'components/xterm.js/dist/xterm',
            typeahead: 'components/jquery-typeahead/dist/jquery.typeahead.min',
          },
          map: { // for backward compatibility
              "*": {
                  "jqueryui": "jquery-ui",
              }
          },
          shim: {
            typeahead: {
              deps: ["jquery"],
              exports: "typeahead"
            },
            underscore: {
              exports: '_'
            },
            backbone: {
              deps: ["underscore", "jquery"],
              exports: "Backbone"
            },
            bootstrap: {
              deps: ["jquery"],
              exports: "bootstrap"
            },
            bootstraptour: {
              deps: ["bootstrap"],
              exports: "Tour"
            },
            "jquery-ui": {
              deps: ["jquery"],
              exports: "$"
            }
          },
          waitSeconds: 30,
      });

      require.config({
          map: {
              '*':{
                'contents': 'services/contents',
              }
          }
      });

      // error-catching custom.js shim.
      define("custom", function (require, exports, module) {
          try {
              var custom = require('custom/custom');
              console.debug('loaded custom.js');
              return custom;
          } catch (e) {
              console.error("error loading custom.js", e);
              return {};
          }
      })
    </script>

    
    

<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="services/contents" src="./Display4Floor_files/contents.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="custom/custom" src="./Display4Floor_files/custom.js.下载"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/widgets/notebook/js/extension" src="./Display4Floor_files/extension.js.下载"></script><style type="text/css">div.MathJax_MathML {text-align: center; margin: .75em 0px; display: block!important}
.MathJax_MathML {font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
span.MathJax_MathML {display: inline!important}
.MathJax_mmlExBox {display: block!important; overflow: hidden; height: 1px; width: 60ex; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0}
[class="MJX-tex-oldstyle"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB}
[class="MJX-tex-oldstyle-bold"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB; font-weight: bold}
[class="MJX-tex-caligraphic"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB}
[class="MJX-tex-caligraphic-bold"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB; font-weight: bold}
@font-face /*1*/ {font-family: MathJax_Caligraphic-WEB; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf')}
@font-face /*2*/ {font-family: MathJax_Caligraphic-WEB; font-weight: bold; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf')}
[mathvariant="double-struck"] {font-family: MathJax_AMS, MathJax_AMS-WEB}
[mathvariant="script"] {font-family: MathJax_Script, MathJax_Script-WEB}
[mathvariant="fraktur"] {font-family: MathJax_Fraktur, MathJax_Fraktur-WEB}
[mathvariant="bold-script"] {font-family: MathJax_Script, MathJax_Caligraphic-WEB; font-weight: bold}
[mathvariant="bold-fraktur"] {font-family: MathJax_Fraktur, MathJax_Fraktur-WEB; font-weight: bold}
[mathvariant="monospace"] {font-family: monospace}
[mathvariant="sans-serif"] {font-family: sans-serif}
[mathvariant="bold-sans-serif"] {font-family: sans-serif; font-weight: bold}
[mathvariant="sans-serif-italic"] {font-family: sans-serif; font-style: italic}
[mathvariant="sans-serif-bold-italic"] {font-family: sans-serif; font-style: italic; font-weight: bold}
@font-face /*3*/ {font-family: MathJax_AMS-WEB; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf')}
@font-face /*4*/ {font-family: MathJax_Script-WEB; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf')}
@font-face /*5*/ {font-family: MathJax_Fraktur-WEB; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf')}
@font-face /*6*/ {font-family: MathJax_Fraktur-WEB; font-weight: bold; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf')}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 0; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">@font-face {font-family: STIXMathJax_Main-italic; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/STIX-Web/woff/STIXMathJax_Main-Italic.woff?rev=2.6.0') format('woff'), url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/STIX-Web/otf/STIXMathJax_Main-Italic.otf?rev=2.6.0') format('opentype')}
</style><link id="favicon" type="image/x-icon" rel="shortcut icon" href="http://10.1.131.92:8888/static/base/images/favicon.ico"><style type="text/css">@font-face {font-family: STIXMathJax_Main; src: url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/STIX-Web/woff/STIXMathJax_Main-Regular.woff?rev=2.6.0') format('woff'), url('http://10.1.131.92:8888/static/components/MathJax/fonts/HTML-CSS/STIX-Web/otf/STIXMathJax_Main-Regular.otf?rev=2.6.0') format('opentype')}
</style></head>

<body class="notebook_app edit_mode" data-jupyter-api-token="0a4aa825d4e457f477925f68e853721e91ace4a6378fdcfc" data-base-url="/" data-ws-url="" data-notebook-name="Display4Floor.ipynb" data-notebook-path="Display4Floor.ipynb" dir="ltr"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"><br></div></div><div id="MathJax_Message" style="display: none;"></div>

<noscript>
    &lt;div id='noscript'&gt;
      Jupyter Notebook requires JavaScript.&lt;br&gt;
      Please enable it to proceed.
  &lt;/div&gt;
</noscript>

<div id="header" style="display: block;">
  <div id="header-container" class="container">
  <div id="ipython_notebook" class="nav navbar-brand pull-left"><a href="http://10.1.131.92:8888/tree" title="dashboard"><img src="./Display4Floor_files/logo.png" alt="Jupyter Notebook"></a></div>

  
  
  

    <span id="login_widget">
      
        <button id="logout" class="btn btn-sm navbar-btn">Logout</button>
      
    </span>

  

  

  


<span id="save_widget" class="pull-left save_widget">
    <span id="notebook_name" class="filename">Display4Floor</span>
    <span class="checkpoint_status" title="Sun, Apr 8, 2018 4:05 PM">Last Checkpoint: 04/08/2018</span>
    <span class="autosave_status">(autosaved)</span>
</span>

<span id="kernel_logo_widget">
  
  <img class="current_kernel_logo" src="./Display4Floor_files/logo-64x64.png" title="Python 2" style="display: inline;">
  
</span>


  </div>
  <div class="header-bar"></div>

  
<div id="menubar-container" class="container">
<div id="menubar">
    <div id="menus" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <button type="button" class="btn btn-default navbar-btn navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <i class="fa fa-bars"></i>
              <span class="navbar-text">Menu</span>
            </button>
            <p id="kernel_indicator" class="navbar-text indicator_area">
              <span class="kernel_indicator_name">Python 2</span>
              <i id="kernel_indicator_icon" class="kernel_idle_icon" title="Kernel Idle"></i>
            </p>
            <i id="readonly-indicator" class="navbar-text" title="This notebook is read-only" style="display: none;">
                <span class="fa-stack">
                    <i class="fa fa-save fa-stack-1x"></i>
                    <i class="fa fa-ban fa-stack-2x text-danger"></i>
                </span>
            </i>
            <i id="modal_indicator" class="navbar-text modal_indicator" title="Edit Mode"></i>
            <span id="notification_area"><div id="notification_kernel" class="notification_widget btn btn-xs navbar-btn undefined info" style="display: none;"><span></span></div><div id="notification_notebook" class="notification_widget btn btn-xs navbar-btn" style="display: none;"><span></span></div><div id="notification_trusted" class="notification_widget btn btn-xs navbar-btn" style="display: inline-block;"><span>Trusted</span></div></span>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">File</a>
                    <ul id="file_menu" class="dropdown-menu">
                        <li id="new_notebook" class="dropdown-submenu">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">New Notebook</a>
                            <ul class="dropdown-menu" id="menu-new-notebook-submenu"><li id="new-notebook-submenu-python2"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Python 2</a></li></ul>
                        </li>
                        <li id="open_notebook" title="Opens a new window with the Dashboard view">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Open...</a></li>
                        <!-- <hr/> -->
                        <li class="divider"></li>
                        <li id="copy_notebook" title="Open a copy of this notebook&#39;s contents and start a new kernel">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Make a Copy...</a></li>
                        <li id="rename_notebook"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Rename...</a></li>
                        <li id="save_checkpoint"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Save and Checkpoint</a></li>
                        <!-- <hr/> -->
                        <li class="divider"></li>
                        <li id="restore_checkpoint" class="dropdown-submenu"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Revert to Checkpoint</a>
                          <ul class="dropdown-menu"><li><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Sunday, April 8, 2018 4:05 PM</a></li></ul>
                        </li>
                        <li class="divider"></li>
                        <li id="print_preview"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Print Preview</a></li>
                        <li class="dropdown-submenu"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Download as</a>
                            <ul id="download_menu" class="dropdown-menu">
                                <li id="download_ipynb"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Notebook (.ipynb)</a></li>
                                <li id="download_script"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Python (.py)</a></li>
                                <li id="download_html"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">HTML (.html)</a></li>
                                <li id="download_markdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Markdown (.md)</a></li>
                                <li id="download_rst"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">reST (.rst)</a></li>
                                <li id="download_latex"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">LaTeX (.tex)</a></li>
                                <li id="download_pdf"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">PDF via LaTeX (.pdf)</a></li>
                            </ul>
                        </li>
                        <li class="dropdown-submenu hidden"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Deploy as</a>
                            <ul id="deploy_menu" class="dropdown-menu"></ul>
                        </li>
                        <li class="divider"></li>
                        <li id="trust_notebook" title="Trust the output of this notebook" class="disabled">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Trusted Notebook</a></li>
                        <li class="divider"></li>
                        <li id="kill_and_exit" title="Shutdown this notebook&#39;s kernel, and close this window">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Close and Halt</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Edit</a>
                    <ul id="edit_menu" class="dropdown-menu">
                        <li id="cut_cell"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Cut Cells</a></li>
                        <li id="copy_cell"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Copy Cells</a></li>
                        <li id="paste_cell_above" class="disabled"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Paste Cells Above</a></li>
                        <li id="paste_cell_below" class="disabled"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Paste Cells Below</a></li>
                        <li id="paste_cell_replace" class="disabled"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Paste Cells &amp; Replace</a></li>
                        <li id="delete_cell"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Delete Cells</a></li>
                        <li id="undelete_cell" class="disabled"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Undo Delete Cells</a></li>
                        <li class="divider"></li>
                        <li id="split_cell"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Split Cell</a></li>
                        <li id="merge_cell_above"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Merge Cell Above</a></li>
                        <li id="merge_cell_below"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Merge Cell Below</a></li>
                        <li class="divider"></li>
                        <li id="move_cell_up"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Move Cell Up</a></li>
                        <li id="move_cell_down"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Move Cell Down</a></li>
                        <li class="divider"></li>
                        <li id="edit_nb_metadata"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Edit Notebook Metadata</a></li>
                        <li class="divider"></li>
                        <li id="find_and_replace"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#"> Find and Replace </a></li>
                        <li class="divider"></li>
                        <li id="cut_cell_attachments"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Cut Cell Attachments</a></li>
                        <li id="copy_cell_attachments"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Copy Cell Attachments</a></li>
                        <li id="paste_cell_attachments" class="disabled"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Paste Cell Attachments</a></li>
                        <li class="divider"></li>
                        <li id="insert_image" class="disabled"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#"> Insert Image </a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">View</a>
                    <ul id="view_menu" class="dropdown-menu">
                        <li id="toggle_header" title="Show/Hide the logo and notebook title (above menu bar)">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle Header</a>
                        </li>
                        <li id="toggle_toolbar" title="Show/Hide the action icons (below menu bar)">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle Toolbar</a>
                        </li>
                        <li id="toggle_line_numbers" title="Show/Hide line numbers in cells">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle Line Numbers</a>
                        </li>
                        <li id="menu-cell-toolbar" class="dropdown-submenu">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Cell Toolbar</a>
                            <ul class="dropdown-menu" id="menu-cell-toolbar-submenu"><li data-name="None"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">None</a></li><li data-name="Edit%20Metadata"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Edit Metadata</a></li><li data-name="Raw%20Cell%20Format"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Raw Cell Format</a></li><li data-name="Slideshow"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Slideshow</a></li><li data-name="Attachments"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Attachments</a></li><li data-name="Tags"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Tags</a></li></ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Insert</a>
                    <ul id="insert_menu" class="dropdown-menu">
                        <li id="insert_cell_above" title="Insert an empty Code cell above the currently active cell">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Insert Cell Above</a></li>
                        <li id="insert_cell_below" title="Insert an empty Code cell below the currently active cell">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Insert Cell Below</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Cell</a>
                    <ul id="cell_menu" class="dropdown-menu">
                        <li id="run_cell" title="Run this cell, and move cursor to the next one">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Run Cells</a></li>
                        <li id="run_cell_select_below" title="Run this cell, select below">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Run Cells and Select Below</a></li>
                        <li id="run_cell_insert_below" title="Run this cell, insert below">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Run Cells and Insert Below</a></li>
                        <li id="run_all_cells" title="Run all cells in the notebook">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Run All</a></li>
                        <li id="run_all_cells_above" title="Run all cells above (but not including) this cell">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Run All Above</a></li>
                        <li id="run_all_cells_below" title="Run this cell and all cells below it">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Run All Below</a></li>
                        <li class="divider"></li>
                        <li id="change_cell_type" class="dropdown-submenu" title="All cells in the notebook have a cell type. By default, new cells are created as &#39;Code&#39; cells">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Cell Type</a>
                            <ul class="dropdown-menu">
                              <li id="to_code" title="Contents will be sent to the kernel for execution, and output will display in the footer of cell">
                                  <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Code</a></li>
                              <li id="to_markdown" title="Contents will be rendered as HTML and serve as explanatory text">
                                  <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Markdown</a></li>
                              <li id="to_raw" title="Contents will pass through nbconvert unmodified">
                                  <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Raw NBConvert</a></li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        <li id="current_outputs" class="dropdown-submenu"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Current Outputs</a>
                            <ul class="dropdown-menu">
                                <li id="toggle_current_output" title="Hide/Show the output of the current cell">
                                    <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle</a>
                                </li>
                                <li id="toggle_current_output_scroll" title="Scroll the output of the current cell">
                                    <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle Scrolling</a>
                                </li>
                                <li id="clear_current_output" title="Clear the output of the current cell">
                                    <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Clear</a>
                                </li>
                            </ul>
                        </li>
                        <li id="all_outputs" class="dropdown-submenu"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">All Output</a>
                            <ul class="dropdown-menu">
                                <li id="toggle_all_output" title="Hide/Show the output of all cells">
                                    <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle</a>
                                </li>
                                <li id="toggle_all_output_scroll" title="Scroll the output of all cells">
                                    <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Toggle Scrolling</a>
                                </li>
                                <li id="clear_all_output" title="Clear the output of all cells">
                                    <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Clear</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Kernel</a>
                    <ul id="kernel_menu" class="dropdown-menu">
                        <li id="int_kernel" title="Send KeyboardInterrupt (CTRL-C) to the Kernel">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Interrupt</a>
                        </li>
                        <li id="restart_kernel" title="Restart the Kernel">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Restart</a>
                        </li>
                        <li id="restart_clear_output" title="Restart the Kernel and clear all output">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Restart &amp; Clear Output</a>
                        </li>
                        <li id="restart_run_all" title="Restart the Kernel and re-run the notebook">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Restart &amp; Run All</a>
                        </li>
                        <li id="reconnect_kernel" title="Reconnect to the Kernel">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Reconnect</a>
                        </li>
                        <li id="shutdown_kernel" title="Shutdown the Kernel">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Shutdown</a>
                        </li>
                        <li class="divider"></li>
                        <li id="menu-change-kernel" class="dropdown-submenu">
                            <a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Change kernel</a>
                            <ul class="dropdown-menu" id="menu-change-kernel-submenu"><li id="kernel-submenu-python2"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Python 2</a></li></ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Help</a>
                    <ul id="help_menu" class="dropdown-menu">
                        
                        <li id="notebook_tour" title="A quick tour of the notebook user interface"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">User Interface Tour</a></li>
                        <li id="keyboard_shortcuts" title="Opens a dialog which shows all keyboard shortcuts"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Keyboard Shortcuts</a></li>
                        <li id="edit_keyboard_shortcuts" title="Opens a dialog allowing you to edit Keyboard shortcuts"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">Edit Keyboard Shortcuts</a></li>
                        <li class="divider"></li>
                        

                        
                            
                                <li><a rel="noreferrer" href="http://nbviewer.ipython.org/github/ipython/ipython/blob/3.x/examples/Notebook/Index.ipynb" target="_blank" title="Opens in a new window">
                                
                                    <i class="fa fa-external-link menu-icon pull-right"></i>
                                

                                Notebook Help
                                </a></li>
                            
                                <li><a rel="noreferrer" href="https://help.github.com/articles/markdown-basics/" target="_blank" title="Opens in a new window">
                                
                                    <i class="fa fa-external-link menu-icon pull-right"></i>
                                

                                Markdown
                                </a></li>
                            
                            
                        
                        <li id="kernel-help-links" class="divider"></li><li><a target="_blank" title="Opens in a new window" href="http://docs.python.org/2.7?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>Python</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://ipython.org/documentation.html?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>IPython</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.scipy.org/doc/numpy/reference/?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>NumPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.scipy.org/doc/scipy/reference/?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>SciPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://matplotlib.org/contents.html?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>Matplotlib</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.sympy.org/latest/index.html?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>SymPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://pandas.pydata.org/pandas-docs/stable/?v=20180316082647"><i class="fa fa-external-link menu-icon pull-right"></i><span>pandas</span></a></li><li class="divider"></li>
                        <li title="About Jupyter Notebook"><a id="notebook_about" href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#">About</a></li>
                        
                    </ul>
                </li>
              </ul>
            </div>
        </div>
    </div>
</div>

<div id="maintoolbar" class="navbar">
  <div class="toolbar-inner navbar-inner navbar-nobg">
    <div id="maintoolbar-container" class="container toolbar"><div class="btn-group" id="save-notbook"><button class="btn btn-default" title="Save and Checkpoint" data-jupyter-action="jupyter-notebook:save-notebook"><i class="fa-save fa"></i></button></div><div class="btn-group" id="insert_above_below"><button class="btn btn-default" title="insert cell below" data-jupyter-action="jupyter-notebook:insert-cell-below"><i class="fa-plus fa"></i></button></div><div class="btn-group" id="cut_copy_paste"><button class="btn btn-default" title="cut selected cells" data-jupyter-action="jupyter-notebook:cut-cell"><i class="fa-cut fa"></i></button><button class="btn btn-default" title="copy selected cells" data-jupyter-action="jupyter-notebook:copy-cell"><i class="fa-copy fa"></i></button><button class="btn btn-default" title="paste cells below" data-jupyter-action="jupyter-notebook:paste-cell-below"><i class="fa-paste fa"></i></button></div><div class="btn-group" id="move_up_down"><button class="btn btn-default" title="move selected cells up" data-jupyter-action="jupyter-notebook:move-cell-up"><i class="fa-arrow-up fa"></i></button><button class="btn btn-default" title="move selected cells down" data-jupyter-action="jupyter-notebook:move-cell-down"><i class="fa-arrow-down fa"></i></button></div><div class="btn-group" id="run_int"><button class="btn btn-default" title="run cell, select below" data-jupyter-action="jupyter-notebook:run-cell-and-select-next"><i class="fa-step-forward fa"></i></button><button class="btn btn-default" title="interrupt kernel" data-jupyter-action="jupyter-notebook:interrupt-kernel"><i class="fa-stop fa"></i></button><button class="btn btn-default" title="restart the kernel (with dialog)" data-jupyter-action="jupyter-notebook:confirm-restart-kernel"><i class="fa-repeat fa"></i></button></div><select id="cell_type" class="form-control select-xs"><option value="code">Code</option><option value="markdown">Markdown</option><option value="raw">Raw NBConvert</option><option value="heading">Heading</option><option value="multiselect" disabled="disabled" style="display: none;">-</option></select><div class="btn-group"><button class="btn btn-default" title="open the command palette" data-jupyter-action="jupyter-notebook:show-command-palette"><i class="fa-keyboard-o fa"></i></button></div></div>
  </div>
</div>
</div>

<div class="lower-header-bar"></div>

</div>

<div id="site" style="height: 655px; display: block;">


<div id="ipython-main-app">
    <div id="notebook_panel">
        <div id="notebook" tabindex="-1"><div class="container" id="notebook-container"><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[2]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 124.594px; left: 54.5938px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 619px; margin-bottom: -17px; border-right-width: 13px; min-height: 385px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 49px; top: 119px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span> <span class="cm-keyword">import</span> <span class="cm-variable">preprocessing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">feature_extraction</span> <span class="cm-keyword">import</span> <span class="cm-variable">DictVectorizer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">one_hot_dataframe</span>(<span class="cm-variable">data</span>, <span class="cm-variable">cols</span>, <span class="cm-variable">replace</span>=<span class="cm-builtin">False</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">""" Takes a dataframe and a list of columns that need to be encoded.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        Returns a 3-tuple comprising the data, the vectorized data,</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        and the fitted vectorizor.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">vec</span> = <span class="cm-variable">DictVectorizer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">mkdict</span> = <span class="cm-keyword">lambda</span> <span class="cm-variable">row</span>: <span class="cm-builtin">dict</span>((<span class="cm-variable">col</span>, <span class="cm-variable">row</span>[<span class="cm-variable">col</span>]) <span class="cm-keyword">for</span> <span class="cm-variable">col</span> <span class="cm-keyword">in</span> <span class="cm-variable">cols</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># manuplate the column</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print type(data[cols])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">vecData</span> = <span class="cm-variable">pd</span>.<span class="cm-property">DataFrame</span>(<span class="cm-variable">vec</span>.<span class="cm-property">fit_transform</span>(<span class="cm-variable">data</span>[<span class="cm-variable">cols</span>].<span class="cm-property">apply</span>(<span class="cm-variable">mkdict</span>,<span class="cm-variable">axis</span>=<span class="cm-number">1</span>)).<span class="cm-property">toarray</span>())</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># get column names</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">vecData</span>.<span class="cm-property">columns</span> = <span class="cm-variable">vec</span>.<span class="cm-property">get_feature_names</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">vecData</span>.<span class="cm-property">index</span> = <span class="cm-variable">data</span>.<span class="cm-property">index</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">if</span> <span class="cm-variable">replace</span> <span class="cm-keyword">is</span> <span class="cm-builtin">True</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">data</span> = <span class="cm-variable">data</span>.<span class="cm-property">drop</span>(<span class="cm-variable">cols</span>, <span class="cm-variable">axis</span>=<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-comment">#column join based on index</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">data</span> = <span class="cm-variable">data</span>.<span class="cm-property">join</span>(<span class="cm-variable">vecData</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> (<span class="cm-variable">data</span>, <span class="cm-variable">vecData</span>, <span class="cm-variable">vec</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 0px solid transparent; top: 385px;"></div><div class="CodeMirror-gutters" style="display: none; height: 398px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[&nbsp;]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 17px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="display: block; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 1165px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 17px; width: 17px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1165px; margin-bottom: -17px; border-right-width: 13px; min-height: 2612px; padding-right: 0px; padding-bottom: 17px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">pandas</span> <span class="cm-keyword">as</span> <span class="cm-variable">pd</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">preProcessing</span>():</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span>(<span class="cm-string">"start:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data_header</span>=[<span class="cm-string">'userID'</span>,<span class="cm-string">'appID'</span>,<span class="cm-string">'appName'</span>,<span class="cm-string">'appflux'</span>,<span class="cm-string">'appduration'</span>,<span class="cm-string">'pv'</span>,<span class="cm-string">'gender'</span>,<span class="cm-string">'age'</span>,<span class="cm-string">'terminal'</span>,<span class="cm-string">'package'</span>,<span class="cm-string">'fee'</span>,<span class="cm-string">'monthflux'</span>,<span class="cm-string">'occupation'</span>,<span class="cm-string">'star'</span>,<span class="cm-string">'payway'</span>,<span class="cm-string">'nettime'</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span> = <span class="cm-variable">pd</span>.<span class="cm-property">read_table</span>(<span class="cm-string">'./txcard/data/data_1.txt'</span>,<span class="cm-variable">sep</span>=<span class="cm-string">'|'</span>,<span class="cm-variable">names</span>=<span class="cm-variable">data_header</span>,<span class="cm-variable">engine</span>=<span class="cm-string">'python'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print set(data['terminal'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#data.head()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#终端偏好，转换成0-17的数字。</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print len(set(data['terminal']))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#ter_map = {x:inx for inx,x in enumerate(set(data['terminal']))}</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#data['terminal']=data['terminal'].map(ter_map)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">'''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    %matplotlib inline</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    import matplotlib.pyplot as plot</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    plot.scatter(data['userID'],data['fee'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    plot.xlabel("user")</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    plot.ylabel("fee")</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    plot.show()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    #print set(data['terminal'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    #print set(data['age']) </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    print "Processing Column Age :========================================="</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    data['age'] = [str(float(i)/10).split('.')[0] for i in data['age']]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    data['age'] = data['age'].replace('nan',0)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    print("age classifer count:",len(set(data['age'])))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    print set(data['age'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    '''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#data.describe()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">import</span> <span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-string">"Processing Age/fee/monthflux NaN issue:================"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#data['age'] = [str(float(i)/10).split('.')[0] for i in data['age']]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'age'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'age'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print("age classifer count:",len(set(data['age'])))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print set(data['age'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#data['fee'] = [str(float(i)/20+1).split('.')[0] for i in   data['fee']]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'fee'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'fee'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print("fee classifer count:",len(set(data['fee'])))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print set(data['fee'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#data['monthflux'] = [str(float(i)/100+1).split('.')[0] for i in   data['monthflux']]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'monthflux'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'monthflux'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print("monthflux classifer count:",len(set(data['monthflux'])))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print set(data['monthflux'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-string">"Processing Column Star/Payway/Nettime :========================================="</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'star'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'star'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'gender'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'gender'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print set(data['star'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'payway'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'payway'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'payway'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>] = <span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>].<span class="cm-property">replace</span>(<span class="cm-variable">np</span>.<span class="cm-property">NaN</span>,<span class="cm-string">'0-0'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>] = [<span class="cm-variable">i</span>.<span class="cm-property">split</span>(<span class="cm-string">'-'</span>)[<span class="cm-number">1</span>] <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span>   <span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">ter_map</span> = {<span class="cm-variable">x</span>:<span class="cm-variable">inx</span> <span class="cm-keyword">for</span> <span class="cm-variable">inx</span>,<span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'terminal'</span>]))}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'terminal'</span>]=<span class="cm-variable">data</span>[<span class="cm-string">'terminal'</span>].<span class="cm-property">map</span>(<span class="cm-variable">ter_map</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">age</span>=<span class="cm-variable">data</span>[<span class="cm-string">'age'</span>]<span class="cm-operator">/</span><span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">age</span> = <span class="cm-variable">age</span>.<span class="cm-property">apply</span>(<span class="cm-variable">numpy</span>.<span class="cm-property">round</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'age'</span>]=<span class="cm-variable">age</span>   </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">fee</span>=<span class="cm-variable">data</span>[<span class="cm-string">'fee'</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#fee = fee.apply(numpy.round)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#X['fee']=fee</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">fee_proce</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable">fee</span>.<span class="cm-property">index</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span><span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span>=<span class="cm-number">0</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span><span class="cm-number">100</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span>=<span class="cm-number">100</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span><span class="cm-number">200</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span>=<span class="cm-number">200</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span><span class="cm-number">300</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&gt;</span>=<span class="cm-number">300</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span><span class="cm-number">400</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&gt;</span>=<span class="cm-number">400</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&lt;</span><span class="cm-number">600</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span>=<span class="cm-number">600</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span><span class="cm-number">1200</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">7</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span>=<span class="cm-number">1200</span> <span class="cm-keyword">and</span> <span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">2400</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">7</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">fee</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&gt;</span><span class="cm-number">2400</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">fee_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">8</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'fee'</span>]=<span class="cm-variable">fee_proce</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">flux_proce</span>=[]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">flux</span>=<span class="cm-variable">data</span>[<span class="cm-string">'monthflux'</span>]<span class="cm-comment">#/100</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#flux = flux.apply(numpy.round)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#X['monthflux']=flux</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable">flux</span>.<span class="cm-property">index</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">200000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-variable">numpy</span>.<span class="cm-property">round</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">/</span><span class="cm-number">10000</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-comment">#flux_proce.append(1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">200000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">300000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">21</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">300000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">400000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">22</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">400000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">500000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">23</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">500000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">600000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">24</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">600000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">800000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">25</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">800000</span> ):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">26</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-comment">#    '''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">data</span>[<span class="cm-string">'monthflux'</span>]=<span class="cm-variable">flux_proce</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-string">"Processing Column Occupation :========================================="</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span>,<span class="cm-variable">vecData</span>,<span class="cm-variable">vec</span> = <span class="cm-variable">one_hot_dataframe</span>(<span class="cm-variable">data</span>,[<span class="cm-string">'occupation'</span>],<span class="cm-variable">replace</span>=<span class="cm-builtin">True</span>)  </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print set(df_out['occupation'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span>.<span class="cm-property">drop</span>(<span class="cm-string">'occupation'</span>,<span class="cm-variable">axis</span>=<span class="cm-number">1</span>, <span class="cm-variable">inplace</span>=<span class="cm-builtin">True</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span> = <span class="cm-variable">df_out</span>.<span class="cm-property">rename</span>(<span class="cm-variable">columns</span>={<span class="cm-string">'occupation=IT人员'</span>:<span class="cm-string">'occ_IT'</span>,<span class="cm-string">'occupation=医疗工作者'</span>:<span class="cm-string">'occ_med'</span>,<span class="cm-string">'occupation=教育工作者'</span>:<span class="cm-string">'occ_tea'</span>,<span class="cm-string">'occupation=金融行业'</span>:<span class="cm-string">'occ_fina'</span>})</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span>.<span class="cm-property">head</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">target_frame</span>=<span class="cm-variable">df_out</span>[[<span class="cm-string">'userID'</span>,<span class="cm-string">'appID'</span>,<span class="cm-string">'appduration'</span>]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span>=<span class="cm-variable">df_out</span>.<span class="cm-property">sort_values</span>(<span class="cm-variable">by</span>=[<span class="cm-string">'userID'</span>,<span class="cm-string">'appduration'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span> = <span class="cm-variable">df_out</span>.<span class="cm-property">drop_duplicates</span>([<span class="cm-string">'userID'</span>],<span class="cm-variable">keep</span>=<span class="cm-string">'first'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">df_out</span>.<span class="cm-property">to_csv</span>(<span class="cm-string">'./txcard/data/datacoll_1.csv'</span>,<span class="cm-variable">index</span>=<span class="cm-builtin">False</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span>(<span class="cm-string">"end:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#preProcessing()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 17px solid transparent; top: 2612px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2642px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell unselected rendered" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -17px; border-right-width: 13px; min-height: 32px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-1"># 查看数据分布</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h1 id="查看数据分布">查看数据分布<a class="anchor-link" href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#查看数据分布">¶</a></h1>
</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[1]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 17px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="display: block; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 1144px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 17px; width: 17px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1144px; margin-bottom: -17px; border-right-width: 13px; min-height: 946px; padding-right: 0px; padding-bottom: 17px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">pandas</span> <span class="cm-keyword">as</span> <span class="cm-variable">pd</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#data_header=['userID','appID','appName','appflux','appduration','pv','gender','age','terminal','package','fee','monthflux','occupation','star','payway','nettime']</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#字段名称：userID,appID,appName,appflux,appduration,pv,gender,age,terminal,package,fee,monthflux,star,payway,nettime,occ_IT,occ_med,occ_tea,occ_fina</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"start:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">data</span> = <span class="cm-variable">pd</span>.<span class="cm-property">read_table</span>(<span class="cm-string">'./txcard/data/datacoll.csv'</span>,<span class="cm-variable">sep</span>=<span class="cm-string">','</span>,<span class="cm-variable">engine</span>=<span class="cm-string">'python'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#for i in data.columns.values:</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#    print ("column name :",i)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#    for k in set(data[i]):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#        print("value name: %s, count of examaples: %d",len(data[data[i]==k]))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">data</span>=<span class="cm-variable">data</span>[[<span class="cm-string">'appID'</span>,<span class="cm-string">'gender'</span>,<span class="cm-string">'age'</span>,<span class="cm-string">'terminal'</span>,<span class="cm-string">'package'</span>,<span class="cm-string">'fee'</span>,<span class="cm-string">'monthflux'</span>,<span class="cm-string">'star'</span>,<span class="cm-string">'payway'</span>,<span class="cm-string">'nettime'</span>]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-variable">data</span>.<span class="cm-property">columns</span>.<span class="cm-property">values</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#for i in data.columns.values:</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#    print "column name :",i</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#    print "===============",len(set(data[i])),"==============="</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#    print set(data[i])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#    for k in set(data[i]): </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#        print len(data[data[i]==k])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----appID"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'appID'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'appID'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----gender"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'gender'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'gender'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----age"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'age'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'age'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----terminal"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'terminal'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'terminal'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----package"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'package'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'package'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----star"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'star'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'star'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----payway"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'payway'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'payway'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----nettime"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'nettime'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"end:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 17px solid transparent; top: 946px;"></div><div class="CodeMirror-gutters" style="display: none; height: 976px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to unscroll output; double click to hide" style=""></div><div class="output output_scroll" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>('start:', '2018-03-26 02:42:41')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
['appID' 'gender' 'age' 'terminal' 'package' 'fee' 'monthflux' 'star'
 'payway' 'nettime']
-----appID
C225569 , 706
C1107 , 423714
C729 , 29761
C223897 , 106
C700 , 5
C688 , 88435
C946 , 3691277
C370 , 969642
-----gender
0.0 , 157086
1.0 , 3395869
2.0 , 1650691
-----age
0.0 , 154859
2.0 , 1
3.0 , 15
4.0 , 18
5.0 , 13
6.0 , 29
7.0 , 34
8.0 , 31
9.0 , 69
10.0 , 114
11.0 , 199
12.0 , 720
13.0 , 1637
14.0 , 4173
15.0 , 17494
16.0 , 38532
17.0 , 71801
18.0 , 103482
19.0 , 131889
20.0 , 145726
21.0 , 160837
22.0 , 186275
23.0 , 192339
24.0 , 198910
25.0 , 197689
26.0 , 194266
27.0 , 243295
28.0 , 227357
29.0 , 209924
30.0 , 209906
31.0 , 179415
32.0 , 150998
33.0 , 148116
34.0 , 148056
35.0 , 160733
36.0 , 132995
37.0 , 116112
38.0 , 110063
39.0 , 100826
40.0 , 85458
41.0 , 82865
42.0 , 79390
43.0 , 80662
44.0 , 84578
45.0 , 83539
46.0 , 79502
47.0 , 77108
48.0 , 65873
49.0 , 64360
50.0 , 43400
51.0 , 43387
52.0 , 40190
53.0 , 41921
54.0 , 48165
55.0 , 33725
56.0 , 19891
57.0 , 22718
58.0 , 18881
59.0 , 19736
60.0 , 19276
61.0 , 16677
62.0 , 15650
63.0 , 14629
64.0 , 11867
65.0 , 10519
66.0 , 8613
67.0 , 7541
68.0 , 6166
69.0 , 4873
70.0 , 4299
71.0 , 3797
72.0 , 3156
73.0 , 2650
74.0 , 2371
75.0 , 2328
76.0 , 2042
77.0 , 1902
78.0 , 1788
79.0 , 1496
80.0 , 1247
81.0 , 1161
82.0 , 969
83.0 , 722
84.0 , 655
85.0 , 522
86.0 , 397
87.0 , 415
88.0 , 283
89.0 , 234
90.0 , 148
91.0 , 119
92.0 , 92
93.0 , 67
94.0 , 90
95.0 , 55
96.0 , 94
97.0 , 101
98.0 , 74
99.0 , 47
100.0 , 25
101.0 , 20
102.0 , 50
103.0 , 5
104.0 , 5
106.0 , 12
107.0 , 1
110.0 , 22
111.0 , 5
112.0 , 5
113.0 , 8
114.0 , 5
115.0 , 6
116.0 , 33
117.0 , 6
906.0 , 8
-3.0 , 1
-----terminal
0 , 2003974
1 , 238509
2 , 1
3 , 9
4 , 1
5 , 1
6 , 4
7 , 2
8 , 85
9 , 930
10 , 1
11 , 21
12 , 3720
13 , 38
14 , 1056
15 , 23
16 , 1
17 , 1
18 , 1
19 , 2
20 , 5
21 , 6
22 , 4
23 , 660
24 , 9
25 , 3
26 , 2
27 , 1
28 , 1
29 , 17
30 , 34
31 , 2
32 , 311635
33 , 20
34 , 9
35 , 3
36 , 2
37 , 14
38 , 1
39 , 2
40 , 1
41 , 3
42 , 271
43 , 1
44 , 1
45 , 6
46 , 383
47 , 8
48 , 137
49 , 1
50 , 1
51 , 3
52 , 33
53 , 2
54 , 6
55 , 3
56 , 8
57 , 3
58 , 1
59 , 1
60 , 1
61 , 66
62 , 48
63 , 1
64 , 1
65 , 4
66 , 15
67 , 95
68 , 24
69 , 9
70 , 5
71 , 1
72 , 46
73 , 11
74 , 1
75 , 18
76 , 1
77 , 1
78 , 16
79 , 1
80 , 539
81 , 12
82 , 4
83 , 9975
84 , 23
85 , 75
86 , 10
87 , 4
88 , 18
89 , 1
90 , 2
91 , 1
92 , 1
93 , 59
94 , 1
95 , 2
96 , 5
97 , 651
98 , 1
99 , 17
100 , 1
101 , 2
102 , 11
103 , 21
104 , 1
105 , 4
106 , 2
107 , 11
108 , 3
109 , 2
110 , 1
111 , 4
112 , 1
113 , 2
114 , 1
115 , 1
116 , 1
117 , 1
118 , 14
119 , 1
120 , 7
121 , 42
122 , 3
123 , 16
124 , 38
125 , 12
126 , 2
127 , 1
128 , 1
129 , 2
130 , 1
131 , 271
132 , 42
133 , 598
134 , 36
135 , 9
136 , 1
137 , 2
138 , 262
139 , 273
140 , 10
141 , 25
142 , 1
143 , 3
144 , 1
145 , 7
146 , 23
147 , 4
148 , 6
149 , 3
150 , 3
151 , 6
152 , 1
153 , 50
154 , 5
155 , 26
156 , 2
157 , 6
158 , 2
159 , 5
160 , 36
161 , 3
162 , 1
163 , 15
164 , 65
165 , 1
166 , 1
167 , 1
168 , 2047
169 , 1
170 , 3
171 , 4
172 , 1
173 , 21
174 , 4
175 , 76
176 , 2
177 , 438
178 , 1
179 , 2
180 , 108
181 , 899
182 , 2
183 , 13
184 , 2
185 , 31
186 , 3
187 , 1
188 , 1
189 , 1
190 , 474
191 , 5
192 , 1
193 , 2
194 , 3
195 , 5
196 , 2
197 , 1
198 , 62
199 , 1
200 , 2
201 , 3
202 , 10
203 , 21
204 , 6
205 , 3
206 , 1
207 , 11
208 , 2
209 , 1
210 , 1
211 , 1
212 , 11
213 , 4
214 , 2
215 , 1
216 , 117
217 , 3
218 , 2
219 , 2
220 , 1
221 , 6
222 , 5
223 , 3
224 , 3
225 , 1
226 , 1
227 , 45
228 , 1
229 , 3
230 , 1
231 , 2
232 , 4
233 , 5
234 , 10
235 , 2
236 , 3
237 , 2
238 , 1
239 , 1
240 , 35
241 , 3
242 , 17
243 , 61
244 , 1
245 , 2
246 , 13
247 , 1
248 , 6
249 , 1
250 , 4
251 , 2
252 , 5
253 , 139
254 , 51
255 , 12
256 , 195529
257 , 1
258 , 117
259 , 32
260 , 2
261 , 1
262 , 1
263 , 1
264 , 3
265 , 41
266 , 11
267 , 3
268 , 3
269 , 1
270 , 2
271 , 2
272 , 3
273 , 4
274 , 2
275 , 1
276 , 1
277 , 43
278 , 3
279 , 7
280 , 1
281 , 336
282 , 36
283 , 121
284 , 1
285 , 5
286 , 1
287 , 59
288 , 4
289 , 1
290 , 2
291 , 5
292 , 1
293 , 13
294 , 15
295 , 5
296 , 21
297 , 16
298 , 1
299 , 1
300 , 103
301 , 3
302 , 7
303 , 40
304 , 5
305 , 1
306 , 212
307 , 2
308 , 6
309 , 3
310 , 154
311 , 3
312 , 9
313 , 1111760
314 , 3
315 , 1
316 , 32
317 , 14
318 , 2
319 , 2
320 , 499
321 , 2
322 , 1
323 , 17
324 , 209
325 , 1
326 , 1
327 , 1
328 , 13
329 , 3
330 , 44
331 , 1
332 , 1
333 , 1
334 , 2
335 , 7
336 , 22
337 , 8
338 , 41
339 , 5
340 , 1
341 , 4
342 , 32
343 , 2
344 , 14
345 , 1
346 , 1
347 , 3
348 , 3
349 , 4475
350 , 2
351 , 1
352 , 2
353 , 14
354 , 3
355 , 631
356 , 2
357 , 13324
358 , 116
359 , 4
360 , 3
361 , 34
362 , 5
363 , 1
364 , 10
365 , 246
366 , 1
367 , 5275
368 , 334899
369 , 63
370 , 1
371 , 373420
372 , 66
373 , 2
374 , 5
375 , 3
376 , 2
377 , 166
378 , 1
379 , 98
380 , 1
381 , 1
382 , 18
383 , 4
384 , 21
385 , 3
386 , 9
387 , 125
388 , 464
389 , 4
390 , 42
391 , 4
392 , 42
393 , 2
394 , 20
395 , 3
396 , 9
397 , 16
398 , 1
399 , 14
400 , 2
401 , 7
402 , 8
403 , 1
404 , 6
405 , 4
406 , 1
407 , 15
408 , 1
409 , 14
410 , 42
411 , 5
412 , 6
413 , 35
414 , 7
415 , 1
416 , 14
417 , 11
418 , 52
419 , 134
420 , 6
421 , 1
422 , 3
423 , 9
424 , 2
425 , 13
426 , 5
427 , 9
428 , 8
429 , 1
430 , 1
431 , 2
432 , 69
433 , 10
434 , 3
435 , 2207
436 , 1
437 , 4
438 , 1
439 , 11
440 , 8
441 , 135
442 , 22
443 , 5
444 , 32
445 , 1
446 , 25
447 , 1
448 , 1
449 , 6
450 , 1
451 , 8
452 , 354
453 , 2
454 , 1
455 , 2
456 , 12
457 , 1
458 , 23
459 , 82
460 , 8
461 , 2
462 , 3
463 , 115
464 , 1
465 , 71
466 , 1
467 , 2
468 , 74
469 , 1
470 , 1
471 , 1
472 , 1
473 , 1
474 , 13
475 , 1
476 , 5
477 , 18
478 , 1
479 , 2
480 , 3
481 , 10
482 , 15
483 , 9
484 , 3
485 , 5
486 , 13
487 , 4
488 , 4
489 , 17
490 , 11
491 , 58
492 , 340
493 , 1
494 , 7
495 , 1122
496 , 5
497 , 8389
498 , 1
499 , 1
500 , 39
501 , 17
502 , 10377
503 , 1
504 , 28
505 , 13
506 , 10
507 , 70
508 , 1
509 , 1
510 , 2
511 , 43
512 , 83
513 , 6
514 , 1
515 , 17
516 , 75
517 , 1
518 , 2
519 , 10
520 , 73
521 , 3
522 , 3
523 , 15911
524 , 1
525 , 1
526 , 4
527 , 2
528 , 5
529 , 32
530 , 112
531 , 3
532 , 36
533 , 344
534 , 2
535 , 1
536 , 5
537 , 2
538 , 12
539 , 1
540 , 4828
541 , 2
542 , 3
543 , 12
544 , 1
545 , 44
546 , 3
547 , 1
548 , 2
549 , 1
550 , 13
551 , 17
552 , 1
553 , 1
554 , 1
555 , 165
556 , 9
557 , 37
558 , 619
559 , 17
560 , 13
561 , 5
562 , 184
563 , 21
564 , 6
565 , 22
566 , 39
567 , 1
568 , 17
569 , 3
570 , 9
571 , 20852
572 , 34
573 , 1
574 , 5
575 , 3
576 , 198
577 , 1
578 , 4
579 , 51
580 , 95
581 , 406
582 , 7
583 , 28
584 , 5
585 , 2
586 , 1
587 , 1
588 , 6
589 , 12
590 , 1
591 , 93
592 , 17
593 , 25
594 , 8
595 , 2
596 , 41
597 , 1
598 , 39
599 , 5
600 , 7
601 , 159
602 , 43
603 , 1
604 , 13
605 , 2
606 , 1
607 , 162
608 , 2
609 , 271680
610 , 120
611 , 1
612 , 4
613 , 11
614 , 4
615 , 104394
616 , 2
617 , 15
618 , 12
619 , 1
620 , 136
621 , 28
622 , 62
623 , 5
624 , 2
625 , 910
626 , 15
627 , 1
628 , 3378
629 , 65
630 , 48
631 , 132
632 , 20
633 , 9
634 , 3
635 , 19
636 , 3
637 , 1
638 , 4
639 , 1
640 , 1
641 , 7
642 , 68
643 , 2
644 , 7
645 , 416
646 , 9912
647 , 1
648 , 1
649 , 12
650 , 3
651 , 2
652 , 1
653 , 3
654 , 1
655 , 18
656 , 7
657 , 23175
658 , 2
659 , 1036
660 , 3
661 , 1
662 , 1
663 , 2
664 , 7
665 , 17
666 , 20
667 , 23
668 , 10
669 , 1
670 , 5
671 , 8
672 , 7
673 , 1
674 , 2
675 , 10
676 , 1
677 , 9
678 , 6
679 , 1
680 , 12
681 , 2
682 , 6
683 , 46
684 , 41
685 , 1
686 , 1
687 , 1499
688 , 46
689 , 1
690 , 289
691 , 10
692 , 7
693 , 1
694 , 15
695 , 39
696 , 1
697 , 11
698 , 12
699 , 46
700 , 644
701 , 22
702 , 118
703 , 1
704 , 30
705 , 2
706 , 18
707 , 29
708 , 1
709 , 1
710 , 1
711 , 1
712 , 648
713 , 5
714 , 2
715 , 53
716 , 6
717 , 3
718 , 4
719 , 3
720 , 51570
721 , 17
722 , 2
723 , 3
724 , 19
725 , 2
726 , 28
727 , 10
728 , 1
729 , 10
730 , 7
731 , 765
732 , 24
733 , 1
734 , 54
735 , 11
736 , 22
737 , 52
738 , 52
739 , 27
740 , 1
741 , 19
742 , 17
743 , 6
744 , 2
745 , 6
746 , 2
747 , 35
748 , 1
749 , 3
750 , 11
751 , 59
752 , 2
753 , 1
754 , 15
755 , 2
756 , 1
757 , 124
758 , 2
759 , 3
760 , 1
761 , 3
762 , 1
763 , 4
764 , 5
765 , 4
766 , 11
767 , 1
768 , 7
769 , 1
770 , 1
771 , 2
772 , 3
773 , 20
774 , 12
775 , 11
776 , 5
777 , 6
778 , 2
779 , 1
780 , 100
781 , 8
782 , 40
783 , 63
784 , 1
785 , 2
786 , 78
787 , 1
</pre></div></div><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>788 , 149
789 , 13
790 , 153
791 , 35
792 , 8
793 , 18
794 , 1
795 , 27
796 , 5
797 , 5
798 , 15
799 , 10
800 , 7
801 , 1
802 , 1
803 , 1
804 , 2
805 , 6
806 , 31
807 , 10793
808 , 8
809 , 5
810 , 1
811 , 7
812 , 1
813 , 12
814 , 1
815 , 4
816 , 1
817 , 6
818 , 7
819 , 203
820 , 1
821 , 2
822 , 63
823 , 3
824 , 10
825 , 105
826 , 57
827 , 443
828 , 24821
829 , 1
830 , 2
831 , 13
832 , 32
833 , 30
834 , 1
835 , 29
836 , 1
837 , 5
838 , 21
839 , 1
840 , 3
841 , 136
842 , 13
843 , 1
844 , 1
845 , 4
-----package
0 , 62524
1 , 1479163
2 , 272115
3 , 1333005
4 , 2056839
-----star
0.0 , 1265133
1.0 , 379527
2.0 , 1418886
3.0 , 793778
4.0 , 765787
5.0 , 580535
-----payway
0.0 , 944025
1.0 , 1638
2.0 , 984584
3.0 , 3103
4.0 , 1525
5.0 , 12517
6.0 , 3152623
7.0 , 103631
-----nettime
0 , 232155
2 , 144966
4 , 38363
6 , 28824
8 , 154593
10 , 561676
12 , 461688
14 , 234772
16 , 240860
18 , 538754
20 , 1082245
22 , 610393
24 , 874357
('end:', '2018-03-26 02:44:10')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell unselected rendered" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -17px; border-right-width: 13px; min-height: 32px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-1"># fee和flux都保留原值/分类值，尝试训练</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h1 id="fee和flux都保留原值/分类值，尝试训练">fee和flux都保留原值/分类值，尝试训练<a class="anchor-link" href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#fee和flux都保留原值/分类值，尝试训练">¶</a></h1>
</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[&nbsp;]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 17px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="display: block; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 1144px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 17px; width: 17px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1144px; margin-bottom: -17px; border-right-width: 13px; min-height: 2051px; padding-right: 0px; padding-bottom: 17px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">pandas</span> <span class="cm-keyword">as</span> <span class="cm-variable">pd</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">inputs</span>():</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># 定义输入输出placeholder。</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">tf</span>.<span class="cm-property">placeholder</span>(<span class="cm-variable">tf</span>.<span class="cm-property">float32</span>, [<span class="cm-builtin">None</span>, <span class="cm-number">13</span>], <span class="cm-variable">name</span>=<span class="cm-string">'x-input'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">y_</span> = <span class="cm-variable">tf</span>.<span class="cm-property">placeholder</span>(<span class="cm-variable">tf</span>.<span class="cm-property">float32</span>, [<span class="cm-builtin">None</span>, <span class="cm-number">8</span>], <span class="cm-variable">name</span>=<span class="cm-string">'y-input'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">x</span>, <span class="cm-variable">y_</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">InputVector</span>=<span class="cm-number">13</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">Layer1Vector</span>=<span class="cm-number">40</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">OutPutVector</span>=<span class="cm-number">8</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">inference</span>(<span class="cm-variable">input_tensor</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">with</span> <span class="cm-variable">tf</span>.<span class="cm-property">variable_scope</span>(<span class="cm-string">'layer1'</span>,<span class="cm-variable">reuse</span>=<span class="cm-builtin">True</span>):<span class="cm-comment">#,reuse=True</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">weights</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"weights"</span>, [<span class="cm-variable">InputVector</span>, <span class="cm-variable">Layer1Vector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">truncated_normal_initializer</span>(<span class="cm-variable">stddev</span>=<span class="cm-number">0.1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">biases</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"biases"</span>, [<span class="cm-variable">Layer1Vector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">constant_initializer</span>(<span class="cm-number">0.0</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">layer1</span> = <span class="cm-variable">tf</span>.<span class="cm-property">nn</span>.<span class="cm-property">relu</span>(<span class="cm-variable">tf</span>.<span class="cm-property">matmul</span>(<span class="cm-variable">input_tensor</span>, <span class="cm-variable">weights</span>) <span class="cm-operator">+</span> <span class="cm-variable">biases</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">with</span> <span class="cm-variable">tf</span>.<span class="cm-property">variable_scope</span>(<span class="cm-string">'layer2'</span>,<span class="cm-variable">reuse</span>=<span class="cm-builtin">True</span>):<span class="cm-comment">#,reuse=True</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">weights</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"weights"</span>, [<span class="cm-variable">Layer1Vector</span>, <span class="cm-variable">OutPutVector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">truncated_normal_initializer</span>(<span class="cm-variable">stddev</span>=<span class="cm-number">0.1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">biases</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"biases"</span>, [<span class="cm-variable">OutPutVector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">constant_initializer</span>(<span class="cm-number">0.0</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">layer2</span> = <span class="cm-variable">tf</span>.<span class="cm-property">matmul</span>(<span class="cm-variable">layer1</span>, <span class="cm-variable">weights</span>) <span class="cm-operator">+</span> <span class="cm-variable">biases</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">layer2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">loss</span>(<span class="cm-variable">y_pred</span>, <span class="cm-variable">y_real</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># 定义损失函数, 这里使用softmax_cross_entropy_with_logits, 首先在对inference输出添加一个</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># softmax层归一化概率，然后计算inference的误差</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">cross_entropy</span>=<span class="cm-variable">tf</span>.<span class="cm-property">nn</span>.<span class="cm-property">softmax_cross_entropy_with_logits</span>(<span class="cm-variable">logits</span>=<span class="cm-variable">y_pred</span>, <span class="cm-variable">labels</span>=<span class="cm-variable">y_real</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">loss</span> = <span class="cm-variable">tf</span>.<span class="cm-property">reduce_mean</span>(<span class="cm-variable">cross_entropy</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">loss</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">accuracy</span>(<span class="cm-variable">y_pred</span>, <span class="cm-variable">y_real</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">correct_prediction</span> = <span class="cm-variable">tf</span>.<span class="cm-property">equal</span>(<span class="cm-variable">tf</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">y_pred</span>, <span class="cm-number">1</span>), <span class="cm-variable">tf</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">y_real</span>, <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">acc</span>= <span class="cm-variable">tf</span>.<span class="cm-property">reduce_mean</span>(<span class="cm-variable">tf</span>.<span class="cm-property">cast</span>(<span class="cm-variable">correct_prediction</span>, <span class="cm-variable">tf</span>.<span class="cm-property">float32</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">acc</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">train_optimizer</span>(<span class="cm-variable">loss</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">train_step</span> = <span class="cm-variable">tf</span>.<span class="cm-property">train</span>.<span class="cm-property">GradientDescentOptimizer</span>(<span class="cm-variable">learning_rate</span>).<span class="cm-property">minimize</span>(<span class="cm-variable">loss</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">train_step</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">dataset_size</span>=<span class="cm-number">3012369</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">batch_size</span>=<span class="cm-number">3000</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">learning_rate</span> = <span class="cm-number">0.001</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">TRAINING_STEPS</span> = <span class="cm-number">300</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">train</span>(<span class="cm-variable">X</span>,<span class="cm-variable">Y</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span>, <span class="cm-variable">y_</span> = <span class="cm-variable">inputs</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">y</span> = <span class="cm-variable">inference</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">losses</span> = <span class="cm-variable">loss</span>(<span class="cm-variable">y_pred</span>=<span class="cm-variable">y</span>, <span class="cm-variable">y_real</span>=<span class="cm-variable">y_</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">acc</span> = <span class="cm-variable">accuracy</span>(<span class="cm-variable">y_pred</span>=<span class="cm-variable">y</span>, <span class="cm-variable">y_real</span>=<span class="cm-variable">y_</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">train_step</span> =<span class="cm-variable">train_optimizer</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">losses</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">cross_validation</span> <span class="cm-keyword">import</span> <span class="cm-variable">train_test_split</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">X_train</span>,<span class="cm-variable">X_test</span>, <span class="cm-variable">y_train</span>, <span class="cm-variable">y_test</span> = <span class="cm-variable">train_test_split</span>(<span class="cm-variable">X</span>,<span class="cm-variable">Y</span>,<span class="cm-variable">test_size</span>=<span class="cm-number">0.8</span>, <span class="cm-variable">random_state</span>=<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">config</span> = <span class="cm-variable">tf</span>.<span class="cm-property">ConfigProto</span>(<span class="cm-variable">allow_soft_placement</span>=<span class="cm-builtin">True</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">config</span>.<span class="cm-property">gpu_options</span>.<span class="cm-property">allocator_type</span> = <span class="cm-string">'BFC'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">config</span>.<span class="cm-property">gpu_options</span>.<span class="cm-property">per_process_gpu_memory_fraction</span> = <span class="cm-number">0.80</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">saver</span> = <span class="cm-variable">tf</span>.<span class="cm-property">train</span>.<span class="cm-property">Saver</span>()  </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">with</span> <span class="cm-variable">tf</span>.<span class="cm-property">Session</span>(<span class="cm-variable">config</span>=<span class="cm-variable">config</span>) <span class="cm-keyword">as</span> <span class="cm-variable">sess</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">with</span> <span class="cm-variable">tf</span>.<span class="cm-property">device</span>(<span class="cm-string">"/gpu:0"</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">sess</span>.<span class="cm-property">run</span>(<span class="cm-variable">tf</span>.<span class="cm-property">global_variables_initializer</span>())</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span>(<span class="cm-variable">TRAINING_STEPS</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                <span class="cm-variable">start</span> = (<span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">batch_size</span>) <span class="cm-operator">%</span> <span class="cm-variable">dataset_size</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                <span class="cm-variable">end</span> = <span class="cm-builtin">min</span>(<span class="cm-variable">start</span> <span class="cm-operator">+</span> <span class="cm-variable">batch_size</span>, <span class="cm-variable">dataset_size</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                <span class="cm-variable">_</span>, <span class="cm-variable">loss_value</span> = <span class="cm-variable">sess</span>.<span class="cm-property">run</span>([<span class="cm-variable">train_step</span>, <span class="cm-variable">losses</span>], <span class="cm-variable">feed_dict</span>={<span class="cm-variable">x</span>: <span class="cm-variable">X_train</span>[<span class="cm-variable">start</span>:<span class="cm-variable">end</span>], <span class="cm-variable">y_</span>: <span class="cm-variable">y_train</span>[<span class="cm-variable">start</span>:<span class="cm-variable">end</span>]})</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">i</span> <span class="cm-operator">%</span> <span class="cm-number">50</span> ==<span class="cm-number">0</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span>(<span class="cm-string">"After %d training step(s), loss on training batch is %g."</span> <span class="cm-operator">%</span> (<span class="cm-variable">i</span>, <span class="cm-variable">loss_value</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">i</span> <span class="cm-operator">%</span> <span class="cm-number">20</span> == <span class="cm-number">0</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                    <span class="cm-variable">test_acc</span> = <span class="cm-variable">sess</span>.<span class="cm-property">run</span>(<span class="cm-variable">acc</span>, <span class="cm-variable">feed_dict</span>={<span class="cm-variable">x</span>: <span class="cm-variable">X_test</span>, <span class="cm-variable">y_</span>: <span class="cm-variable">y_test</span>})</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span>(<span class="cm-string">"After %d training step(s), accuracy on test is %g."</span> <span class="cm-operator">%</span> (<span class="cm-variable">i</span>, <span class="cm-variable">test_acc</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-comment">#test_acc = sess.run(acc, feed_dict={x:mnist.test.images, y_:mnist.test.labels})</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-comment">#print("After %d training step(s), accuracy on test is %g." % (TRAINING_STEPS, test_acc))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">saver</span>.<span class="cm-property">save</span>(<span class="cm-variable">sess</span>, <span class="cm-string">"./txcard/model/model.ckpt"</span>) </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#data_header=['userID','appID','appName','appflux','appduration','pv','gender','age','terminal','package','fee','monthflux','occupation','star','payway','nettime']</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#字段名称：userID,appID,appName,appflux,appduration,pv,gender,age,terminal,package,fee,monthflux,star,payway,nettime,occ_IT,occ_med,occ_tea,occ_fina</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"start:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">data</span> = <span class="cm-variable">pd</span>.<span class="cm-property">read_table</span>(<span class="cm-string">'./txcard/data/datacoll_1.csv'</span>,<span class="cm-variable">sep</span>=<span class="cm-string">','</span>,<span class="cm-variable">engine</span>=<span class="cm-string">'python'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-variable">data</span>.<span class="cm-property">columns</span>.<span class="cm-property">values</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X_C370</span>=<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'appID'</span>]==<span class="cm-string">'C946'</span>].<span class="cm-property">sample</span>(<span class="cm-variable">n</span> = <span class="cm-number">1500000</span>,<span class="cm-variable">axis</span>=<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X_rest</span>=<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'appID'</span>]<span class="cm-operator">!</span>=<span class="cm-string">'C946'</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"===debug: the length of data X_C370:"</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">X_C370</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"===debug: the length of data X_rest:"</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">X_rest</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###exit()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X</span>=<span class="cm-variable">X_C370</span>.<span class="cm-property">append</span>(<span class="cm-variable">X_rest</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"debug: the length of data collection:"</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">X</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X</span>=<span class="cm-variable">data</span>[[<span class="cm-string">'gender'</span>,<span class="cm-string">'age'</span>,<span class="cm-string">'terminal'</span>,<span class="cm-string">'package'</span>,<span class="cm-string">'fee'</span>,<span class="cm-string">'monthflux'</span>,<span class="cm-string">'star'</span>,<span class="cm-string">'payway'</span>,<span class="cm-string">'nettime'</span>,<span class="cm-string">'occ_IT'</span>,<span class="cm-string">'occ_med'</span>,<span class="cm-string">'occ_tea'</span>,<span class="cm-string">'occ_fina'</span>]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#X = X.fillna(0)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">Y</span>=<span class="cm-variable">data</span>[[<span class="cm-string">'appID'</span>]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">Y_data</span>,<span class="cm-variable">vec_data</span>,<span class="cm-variable">vec</span> = <span class="cm-variable">one_hot_dataframe</span>(<span class="cm-variable">Y</span>,[<span class="cm-string">'appID'</span>],<span class="cm-variable">replace</span>=<span class="cm-builtin">True</span>) </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"============================"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-variable">vec</span>.<span class="cm-property">vocabulary_</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">exit</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#app_map = {x:inx for inx,x in enumerate(set(Y['appflux']))}</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Y['appflux']=Y['appflux'].map(app_map)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"features and labels are done……"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">tensorflow</span> <span class="cm-keyword">as</span> <span class="cm-variable">tf</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Y_data.head()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">train</span>(<span class="cm-variable">X</span>,<span class="cm-variable">Y_data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"end:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 17px solid transparent; top: 2051px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2081px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>('start:', '2018-04-08 06:37:59')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
['userID' 'appID' 'appName' 'appflux' 'appduration' 'pv' 'gender' 'age'
 'terminal' 'package' 'fee' 'monthflux' 'star' 'payway' 'nettime' 'occ_IT'
 'occ_med' 'occ_tea' 'occ_fina']
===debug: the length of data X_C370: 1500000
===debug: the length of data X_rest: 1512369
debug: the length of data collection: 3012369
============================
{'appID=C370': 3, 'appID=C946': 7, 'appID=C688': 4, 'appID=C729': 6, 'appID=C700': 5, 'appID=C1107': 0, 'appID=C223897': 1, 'appID=C225569': 2}
features and labels are done……
('end:', '2018-04-08 06:40:33')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell unselected rendered" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -17px; border-right-width: 13px; min-height: 32px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-1"># 各种都变成分类的值，再训练(测试，不实际训练了)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h1 id="各种都变成分类的值，再训练(测试，不实际训练了)">各种都变成分类的值，再训练(测试，不实际训练了)<a class="anchor-link" href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#各种都变成分类的值，再训练(测试，不实际训练了)">¶</a></h1>
</div></div></div><div class="cell code_cell rendered selected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[28]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython CodeMirror-focused"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 532.594px; left: 236.594px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 17px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="display: block; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 1144px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 17px; width: 17px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1144px; margin-bottom: -17px; border-right-width: 13px; min-height: 1677px; padding-right: 0px; padding-bottom: 17px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 231px; top: 527px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">pandas</span> <span class="cm-keyword">as</span> <span class="cm-variable">pd</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">numpy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-operator">%</span><span class="cm-variable">matplotlib</span> <span class="cm-variable">inline</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">matplotlib</span>.<span class="cm-property">pyplot</span> <span class="cm-keyword">as</span> <span class="cm-variable">plot</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#data_header=['userID','appID','appName','appflux','appduration','pv','gender','age','terminal','package','fee','monthflux','occupation','star','payway','nettime']</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#字段名称：userID,appID,appName,appflux,appduration,pv,gender,age,terminal,package,fee,monthflux,star,payway,nettime,occ_IT,occ_med,occ_tea,occ_fina</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"start:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">data</span> = <span class="cm-variable">pd</span>.<span class="cm-property">read_table</span>(<span class="cm-string">'./txcard/data/datacoll.csv'</span>,<span class="cm-variable">sep</span>=<span class="cm-string">','</span>,<span class="cm-variable">engine</span>=<span class="cm-string">'python'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-variable">data</span>.<span class="cm-property">columns</span>.<span class="cm-property">values</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X_C370</span>=<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'appID'</span>]==<span class="cm-string">'C946'</span>].<span class="cm-property">sample</span>(<span class="cm-variable">n</span> = <span class="cm-number">1500000</span>,<span class="cm-variable">axis</span>=<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X_rest</span>=<span class="cm-variable">data</span>[<span class="cm-variable">data</span>[<span class="cm-string">'appID'</span>]<span class="cm-operator">!</span>=<span class="cm-string">'C946'</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#print "===debug: the length of data X_C370:",len(X_C370)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#print "===debug: the length of data X_rest:",len(X_rest)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X</span>=<span class="cm-variable">X_C370</span>.<span class="cm-property">append</span>(<span class="cm-variable">X_rest</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">age</span>=<span class="cm-variable">X</span>[<span class="cm-string">'age'</span>]<span class="cm-operator">/</span><span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">age</span> = <span class="cm-variable">age</span>.<span class="cm-property">apply</span>(<span class="cm-variable">numpy</span>.<span class="cm-property">round</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X</span>[<span class="cm-string">'age'</span>]=<span class="cm-variable">age</span>   </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">fee=X['fee']/20</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">fee = fee.apply(numpy.round)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">#X['fee']=fee</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">fee_proce = []</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">for i in fee.index:</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    if(fee[i]&lt;0):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(0)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif</span><span class="cm-string CodeMirror-matchingbracket">(</span><span class="cm-string">fee[i] &gt;=0 and fee[i]&lt;5</span><span class="cm-string CodeMirror-matchingbracket">)</span><span class="cm-string">:</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i] &gt;=5 and fee[i]&lt;10):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(2)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i] &gt;=10 and fee[i]&lt;15):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(3)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i]&gt;=15 and fee[i]&lt;20):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(4)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i]&gt;=20 and fee[i] &lt;30):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(5)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i] &gt;=30 and fee[i]&lt;60):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(7)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i] &gt;=60 and fee[i]&lt;=120):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(7)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    elif(fee[i]&gt;120):</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">        fee_proce.append(8)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">X['fee']=fee_proce</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">plot.scatter(X['userID'],X['fee'])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">plot.xlabel("user")</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">plot.ylabel("fee")</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">plot.show()</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">print "-----fee"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">for k in set(X['fee']):         </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    print k,",",len(X[X['fee']==k])</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">flux_proce</span>=[]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">flux</span>=<span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>]<span class="cm-operator">/</span><span class="cm-number">100</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">flux</span> = <span class="cm-variable">flux</span>.<span class="cm-property">apply</span>(<span class="cm-variable">numpy</span>.<span class="cm-property">round</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>]=<span class="cm-variable">flux</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">scatter</span>(<span class="cm-variable">X</span>[<span class="cm-string">'userID'</span>],<span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">xlabel</span>(<span class="cm-string">"user"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">ylabel</span>(<span class="cm-string">"monthflux"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable">flux</span>.<span class="cm-property">index</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">if</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">2000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-variable">numpy</span>.<span class="cm-property">round</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">/</span><span class="cm-number">100</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-comment">#flux_proce.append(1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">2000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">3000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">21</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">3000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">4000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">22</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">4000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">5000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">23</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">5000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">6000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">24</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">6000</span> <span class="cm-keyword">and</span> <span class="cm-variable">flux</span>[<span class="cm-variable">i</span>]<span class="cm-operator">&lt;</span>=<span class="cm-number">8000</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">25</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">elif</span>(<span class="cm-variable">flux</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span><span class="cm-number">8000</span> ):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">flux_proce</span>.<span class="cm-property">append</span>(<span class="cm-number">26</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#    '''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>]=<span class="cm-variable">flux_proce</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">scatter</span>(<span class="cm-variable">X</span>[<span class="cm-string">'userID'</span>],<span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">xlabel</span>(<span class="cm-string">"user"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">ylabel</span>(<span class="cm-string">"monthflux"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">plot</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"-----flux"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">k</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span>(<span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>]):         </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">k</span>,<span class="cm-string">","</span>,<span class="cm-builtin">len</span>(<span class="cm-variable">X</span>[<span class="cm-variable">X</span>[<span class="cm-string">'monthflux'</span>]==<span class="cm-variable">k</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 17px solid transparent; top: 1677px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1707px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to unscroll output; double click to hide" style=""></div><div class="output output_scroll" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>('start:', '2018-03-26 10:07:13')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
['userID' 'appID' 'appName' 'appflux' 'appduration' 'pv' 'gender' 'age'
 'terminal' 'package' 'fee' 'monthflux' 'star' 'payway' 'nettime' 'occ_IT'
 'occ_med' 'occ_tea' 'occ_fina']
</pre></div></div><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_error"><pre>
<span class="ansi-red-fg">KeyboardInterrupt</span>Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-28-f9dbb4504678&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span> plot<span class="ansi-blue-fg">.</span>xlabel<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">"user"</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    138</span> plot<span class="ansi-blue-fg">.</span>ylabel<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">"monthflux"</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 139</span><span class="ansi-red-fg"> </span>plot<span class="ansi-blue-fg">.</span>show<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    140</span> 
<span class="ansi-green-intense-fg ansi-bold">    141</span> <span class="ansi-green-fg">for</span> i <span class="ansi-green-fg">in</span> flux<span class="ansi-blue-fg">.</span>index<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/matplotlib/pyplot.pyc</span> in <span class="ansi-cyan-fg">show</span><span class="ansi-blue-fg">(*args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    251</span>     """
<span class="ansi-green-intense-fg ansi-bold">    252</span>     <span class="ansi-green-fg">global</span> _show
<span class="ansi-green-fg">--&gt; 253</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">return</span> _show<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kw<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    254</span> 
<span class="ansi-green-intense-fg ansi-bold">    255</span> 

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/ipykernel/pylab/backend_inline.pyc</span> in <span class="ansi-cyan-fg">show</span><span class="ansi-blue-fg">(close, block)</span>
<span class="ansi-green-intense-fg ansi-bold">     34</span>     <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     35</span>         <span class="ansi-green-fg">for</span> figure_manager <span class="ansi-green-fg">in</span> Gcf<span class="ansi-blue-fg">.</span>get_all_fig_managers<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 36</span><span class="ansi-red-fg">             </span>display<span class="ansi-blue-fg">(</span>figure_manager<span class="ansi-blue-fg">.</span>canvas<span class="ansi-blue-fg">.</span>figure<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     37</span>     <span class="ansi-green-fg">finally</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     38</span>         show<span class="ansi-blue-fg">.</span>_to_draw <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/IPython/core/display.pyc</span> in <span class="ansi-cyan-fg">display</span><span class="ansi-blue-fg">(*objs, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    304</span>             publish_display_data<span class="ansi-blue-fg">(</span>data<span class="ansi-blue-fg">=</span>obj<span class="ansi-blue-fg">,</span> metadata<span class="ansi-blue-fg">=</span>metadata<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    305</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 306</span><span class="ansi-red-fg">             </span>format_dict<span class="ansi-blue-fg">,</span> md_dict <span class="ansi-blue-fg">=</span> format<span class="ansi-blue-fg">(</span>obj<span class="ansi-blue-fg">,</span> include<span class="ansi-blue-fg">=</span>include<span class="ansi-blue-fg">,</span> exclude<span class="ansi-blue-fg">=</span>exclude<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    307</span>             <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> format_dict<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    308</span>                 <span class="ansi-red-fg"># nothing to display (e.g. _ipython_display_ took over)</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/IPython/core/formatters.pyc</span> in <span class="ansi-cyan-fg">format</span><span class="ansi-blue-fg">(self, obj, include, exclude)</span>
<span class="ansi-green-intense-fg ansi-bold">    171</span>             md <span class="ansi-blue-fg">=</span> None
<span class="ansi-green-intense-fg ansi-bold">    172</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 173</span><span class="ansi-red-fg">                 </span>data <span class="ansi-blue-fg">=</span> formatter<span class="ansi-blue-fg">(</span>obj<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    174</span>             <span class="ansi-green-fg">except</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    175</span>                 <span class="ansi-red-fg"># FIXME: log the exception</span>

<span class="ansi-green-fg">&lt;decorator-gen-9&gt;</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, obj)</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/IPython/core/formatters.pyc</span> in <span class="ansi-cyan-fg">catch_format_error</span><span class="ansi-blue-fg">(method, self, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    215</span>     <span class="ansi-blue-fg">"""show traceback on failed format call"""</span>
<span class="ansi-green-intense-fg ansi-bold">    216</span>     <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 217</span><span class="ansi-red-fg">         </span>r <span class="ansi-blue-fg">=</span> method<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    218</span>     <span class="ansi-green-fg">except</span> NotImplementedError<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    219</span>         <span class="ansi-red-fg"># don't warn on NotImplementedErrors</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/IPython/core/formatters.pyc</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, obj)</span>
<span class="ansi-green-intense-fg ansi-bold">    332</span>                 <span class="ansi-green-fg">pass</span>
<span class="ansi-green-intense-fg ansi-bold">    333</span>             <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 334</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">return</span> printer<span class="ansi-blue-fg">(</span>obj<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    335</span>             <span class="ansi-red-fg"># Finally look for special method names</span>
<span class="ansi-green-intense-fg ansi-bold">    336</span>             method <span class="ansi-blue-fg">=</span> get_real_method<span class="ansi-blue-fg">(</span>obj<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>print_method<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/IPython/core/pylabtools.pyc</span> in <span class="ansi-cyan-fg">&lt;lambda&gt;</span><span class="ansi-blue-fg">(fig)</span>
<span class="ansi-green-intense-fg ansi-bold">    238</span> 
<span class="ansi-green-intense-fg ansi-bold">    239</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">'png'</span> <span class="ansi-green-fg">in</span> formats<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 240</span><span class="ansi-red-fg">         </span>png_formatter<span class="ansi-blue-fg">.</span>for_type<span class="ansi-blue-fg">(</span>Figure<span class="ansi-blue-fg">,</span> <span class="ansi-green-fg">lambda</span> fig<span class="ansi-blue-fg">:</span> print_figure<span class="ansi-blue-fg">(</span>fig<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">'png'</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    241</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">'retina'</span> <span class="ansi-green-fg">in</span> formats <span class="ansi-green-fg">or</span> <span class="ansi-blue-fg">'png2x'</span> <span class="ansi-green-fg">in</span> formats<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    242</span>         png_formatter<span class="ansi-blue-fg">.</span>for_type<span class="ansi-blue-fg">(</span>Figure<span class="ansi-blue-fg">,</span> <span class="ansi-green-fg">lambda</span> fig<span class="ansi-blue-fg">:</span> retina_figure<span class="ansi-blue-fg">(</span>fig<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/IPython/core/pylabtools.pyc</span> in <span class="ansi-cyan-fg">print_figure</span><span class="ansi-blue-fg">(fig, fmt, bbox_inches, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span> 
<span class="ansi-green-intense-fg ansi-bold">    123</span>     bytes_io <span class="ansi-blue-fg">=</span> BytesIO<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 124</span><span class="ansi-red-fg">     </span>fig<span class="ansi-blue-fg">.</span>canvas<span class="ansi-blue-fg">.</span>print_figure<span class="ansi-blue-fg">(</span>bytes_io<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kw<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>     data <span class="ansi-blue-fg">=</span> bytes_io<span class="ansi-blue-fg">.</span>getvalue<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>     <span class="ansi-green-fg">if</span> fmt <span class="ansi-blue-fg">==</span> <span class="ansi-blue-fg">'svg'</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/matplotlib/backend_bases.pyc</span> in <span class="ansi-cyan-fg">print_figure</span><span class="ansi-blue-fg">(self, filename, dpi, facecolor, edgecolor, orientation, format, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">   2208</span>                 bbox_filtered <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">   2209</span>                 <span class="ansi-green-fg">for</span> a <span class="ansi-green-fg">in</span> bbox_artists<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 2210</span><span class="ansi-red-fg">                     </span>bbox <span class="ansi-blue-fg">=</span> a<span class="ansi-blue-fg">.</span>get_window_extent<span class="ansi-blue-fg">(</span>renderer<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   2211</span>                     <span class="ansi-green-fg">if</span> a<span class="ansi-blue-fg">.</span>get_clip_on<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   2212</span>                         clip_box <span class="ansi-blue-fg">=</span> a<span class="ansi-blue-fg">.</span>get_clip_box<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/matplotlib/collections.pyc</span> in <span class="ansi-cyan-fg">get_window_extent</span><span class="ansi-blue-fg">(self, renderer)</span>
<span class="ansi-green-intense-fg ansi-bold">    236</span>         <span class="ansi-red-fg"># TODO:check to ensure that this does not fail for</span>
<span class="ansi-green-intense-fg ansi-bold">    237</span>         <span class="ansi-red-fg"># cases other than scatter plot legend</span>
<span class="ansi-green-fg">--&gt; 238</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>get_datalim<span class="ansi-blue-fg">(</span>transforms<span class="ansi-blue-fg">.</span>IdentityTransform<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    239</span> 
<span class="ansi-green-intense-fg ansi-bold">    240</span>     <span class="ansi-green-fg">def</span> _prepare_points<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/matplotlib/collections.pyc</span> in <span class="ansi-cyan-fg">get_datalim</span><span class="ansi-blue-fg">(self, transData)</span>
<span class="ansi-green-intense-fg ansi-bold">    227</span>             result = mpath.get_path_collection_extents(
<span class="ansi-green-intense-fg ansi-bold">    228</span>                 transform<span class="ansi-blue-fg">.</span>frozen<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> paths<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>get_transforms<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">--&gt; 229</span><span class="ansi-red-fg">                 offsets, transOffset.frozen())
</span><span class="ansi-green-intense-fg ansi-bold">    230</span>             result <span class="ansi-blue-fg">=</span> result<span class="ansi-blue-fg">.</span>inverse_transformed<span class="ansi-blue-fg">(</span>transData<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    231</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/matplotlib/path.pyc</span> in <span class="ansi-cyan-fg">get_path_collection_extents</span><span class="ansi-blue-fg">(master_transform, paths, transforms, offsets, offset_transform)</span>
<span class="ansi-green-intense-fg ansi-bold">   1008</span>     return Bbox.from_extents(*_path.get_path_collection_extents(
<span class="ansi-green-intense-fg ansi-bold">   1009</span>         master_transform<span class="ansi-blue-fg">,</span> paths<span class="ansi-blue-fg">,</span> np<span class="ansi-blue-fg">.</span>atleast_3d<span class="ansi-blue-fg">(</span>transforms<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">-&gt; 1010</span><span class="ansi-red-fg">         offsets, offset_transform))
</span><span class="ansi-green-intense-fg ansi-bold">   1011</span> 
<span class="ansi-green-intense-fg ansi-bold">   1012</span> 

<span class="ansi-green-fg">/usr/local/lib/python2.7/dist-packages/matplotlib/path.pyc</span> in <span class="ansi-cyan-fg">should_simplify</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    271</span>         <span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_has_nonfinite
<span class="ansi-green-intense-fg ansi-bold">    272</span> 
<span class="ansi-green-fg">--&gt; 273</span><span class="ansi-red-fg">     </span><span class="ansi-blue-fg">@</span>property
<span class="ansi-green-intense-fg ansi-bold">    274</span>     <span class="ansi-green-fg">def</span> should_simplify<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    275</span>         """

<span class="ansi-red-fg">KeyboardInterrupt</span>: 

</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[10]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 920px; margin-bottom: -17px; border-right-width: 13px; min-height: 657px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">inputs</span>():</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># 定义输入输出placeholder。</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">tf</span>.<span class="cm-property">placeholder</span>(<span class="cm-variable">tf</span>.<span class="cm-property">float32</span>, [<span class="cm-builtin">None</span>, <span class="cm-number">13</span>], <span class="cm-variable">name</span>=<span class="cm-string">'x-input'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">InputVector</span>=<span class="cm-number">13</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">Layer1Vector</span>=<span class="cm-number">40</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">OutPutVector</span>=<span class="cm-number">8</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">inference</span>(<span class="cm-variable">input_tensor</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">with</span> <span class="cm-variable">tf</span>.<span class="cm-property">variable_scope</span>(<span class="cm-string">'layer1'</span>,<span class="cm-variable">reuse</span>=<span class="cm-builtin">True</span>):<span class="cm-comment">#,reuse=True</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">weights</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"weights"</span>, [<span class="cm-variable">InputVector</span>, <span class="cm-variable">Layer1Vector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">truncated_normal_initializer</span>(<span class="cm-variable">stddev</span>=<span class="cm-number">0.1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">biases</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"biases"</span>, [<span class="cm-variable">Layer1Vector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">constant_initializer</span>(<span class="cm-number">0.0</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">layer1</span> = <span class="cm-variable">tf</span>.<span class="cm-property">nn</span>.<span class="cm-property">relu</span>(<span class="cm-variable">tf</span>.<span class="cm-property">matmul</span>(<span class="cm-variable">input_tensor</span>, <span class="cm-variable">weights</span>) <span class="cm-operator">+</span> <span class="cm-variable">biases</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">with</span> <span class="cm-variable">tf</span>.<span class="cm-property">variable_scope</span>(<span class="cm-string">'layer2'</span>,<span class="cm-variable">reuse</span>=<span class="cm-builtin">True</span>):<span class="cm-comment">#,reuse=True</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">weights</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"weights"</span>, [<span class="cm-variable">Layer1Vector</span>, <span class="cm-variable">OutPutVector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">truncated_normal_initializer</span>(<span class="cm-variable">stddev</span>=<span class="cm-number">0.1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">biases</span> = <span class="cm-variable">tf</span>.<span class="cm-property">get_variable</span>(<span class="cm-string">"biases"</span>, [<span class="cm-variable">OutPutVector</span>], <span class="cm-variable">initializer</span>=<span class="cm-variable">tf</span>.<span class="cm-property">constant_initializer</span>(<span class="cm-number">0.0</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-variable">layer2</span> = <span class="cm-variable">tf</span>.<span class="cm-property">matmul</span>(<span class="cm-variable">layer1</span>, <span class="cm-variable">weights</span>) <span class="cm-operator">+</span> <span class="cm-variable">biases</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">layer2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">loss</span>(<span class="cm-variable">y_pred</span>, <span class="cm-variable">y_real</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># 定义损失函数, 这里使用softmax_cross_entropy_with_logits, 首先在对inference输出添加一个</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># softmax层归一化概率，然后计算inference的误差</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">cross_entropy</span>=<span class="cm-variable">tf</span>.<span class="cm-property">nn</span>.<span class="cm-property">softmax_cross_entropy_with_logits</span>(<span class="cm-variable">logits</span>=<span class="cm-variable">y_pred</span>, <span class="cm-variable">labels</span>=<span class="cm-variable">y_real</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">loss</span> = <span class="cm-variable">tf</span>.<span class="cm-property">reduce_mean</span>(<span class="cm-variable">cross_entropy</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">loss</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">accuracy</span>(<span class="cm-variable">y_pred</span>, <span class="cm-variable">y_real</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">correct_prediction</span> = <span class="cm-variable">tf</span>.<span class="cm-property">equal</span>(<span class="cm-variable">tf</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">y_pred</span>, <span class="cm-number">1</span>), <span class="cm-variable">tf</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">y_real</span>, <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">acc</span>= <span class="cm-variable">tf</span>.<span class="cm-property">reduce_mean</span>(<span class="cm-variable">tf</span>.<span class="cm-property">cast</span>(<span class="cm-variable">correct_prediction</span>, <span class="cm-variable">tf</span>.<span class="cm-property">float32</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">acc</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">train_optimizer</span>(<span class="cm-variable">loss</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">train_step</span> = <span class="cm-variable">tf</span>.<span class="cm-property">train</span>.<span class="cm-property">GradientDescentOptimizer</span>(<span class="cm-variable">learning_rate</span>).<span class="cm-property">minimize</span>(<span class="cm-variable">loss</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">train_step</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 0px solid transparent; top: 657px;"></div><div class="CodeMirror-gutters" style="display: none; height: 670px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[13]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 17px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="display: block; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 1018px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 17px; width: 17px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1018px; margin-bottom: -17px; border-right-width: 13px; min-height: 606px; padding-right: 0px; padding-bottom: 17px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">tensorflow</span> <span class="cm-keyword">as</span> <span class="cm-variable">tf</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">loadModel</span>(<span class="cm-variable">sess</span>,<span class="cm-variable">inputdata</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">inputs</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">y</span> = <span class="cm-variable">inference</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">sess</span>.<span class="cm-property">run</span>(<span class="cm-variable">tf</span>.<span class="cm-property">global_variables_initializer</span>())</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">saver</span>=<span class="cm-variable">tf</span>.<span class="cm-property">train</span>.<span class="cm-property">Saver</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">load_path</span>=<span class="cm-variable">saver</span>.<span class="cm-property">restore</span>(<span class="cm-variable">sess</span>,<span class="cm-string">"./txcard/model/model.ckpt"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">prediction</span>=<span class="cm-variable">sess</span>.<span class="cm-property">run</span>(<span class="cm-variable">y</span>,<span class="cm-variable">feed_dict</span>={<span class="cm-variable">x</span>:<span class="cm-variable">inputdata</span>})</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">print</span> <span class="cm-variable">prediction</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">prediction</span>.<span class="cm-property">argmax</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#mode_file=tf.train.latest_checkpoint('./txcard/model/')</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#val_loss,val_acc=sess.run([loss,acc],feed_dict={x:,y:})</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">#print('val_loss:%f, val_acc:%f'%(val_loss,val_acc))</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"start:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">inputStr</span>=<span class="cm-string">'13001000113,C946,腾讯视频,9166,79.0,6,1.0,6.0,1,4,1,0.0,2.0,0.0,10,0.0,0.0,0.0,0.0'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">arry</span>= <span class="cm-variable">inputStr</span>.<span class="cm-property">split</span>(<span class="cm-string">','</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">inputa</span>=[<span class="cm-variable">arry</span>[<span class="cm-number">6</span>:]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">app_map</span>={<span class="cm-number">0</span>:<span class="cm-string">'C1107'</span>,<span class="cm-number">1</span>:<span class="cm-string">'C223897'</span>,<span class="cm-number">2</span>:<span class="cm-string">'C225569'</span>,<span class="cm-number">3</span>:<span class="cm-string">'C370'</span>,<span class="cm-number">4</span>:<span class="cm-string">'C688'</span>,<span class="cm-number">5</span>:<span class="cm-string">'C700'</span>,<span class="cm-number">6</span>:<span class="cm-string">'C729'</span>,<span class="cm-number">7</span>:<span class="cm-string">'C946'</span>}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">sess</span> = <span class="cm-variable">tf</span>.<span class="cm-property">InteractiveSession</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-string">"start:------------------"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">appID</span>=<span class="cm-variable">app_map</span>[<span class="cm-variable">loadModel</span>(<span class="cm-variable">sess</span>,<span class="cm-variable">inputa</span>)]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span> <span class="cm-variable">appID</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">sess</span>.<span class="cm-property">close</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"end:"</span>,<span class="cm-variable">time</span>.<span class="cm-property">strftime</span>(<span class="cm-string">'%Y-%m-%d %H:%M:%S'</span>,<span class="cm-variable">time</span>.<span class="cm-property">localtime</span>(<span class="cm-variable">time</span>.<span class="cm-property">time</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">print</span>(<span class="cm-string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># {'appID=C370': 3, 'appID=C946': 7, 'appID=C688': 4, 'appID=C729': 6, 'appID=C700': 5, 'appID=C1107': 0, 'appID=C223897': 1, 'appID=C225569': 2}</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 17px solid transparent; top: 606px;"></div><div class="CodeMirror-gutters" style="display: none; height: 636px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>('start:', '2018-04-08 08:05:36')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
start:------------------
INFO:tensorflow:Restoring parameters from ./txcard/model/model.ckpt
[[-0.03150722 -0.35837296  0.08927213  0.57765758 -0.10647046 -0.69176167
  -0.44034806  1.72532666]]
C946
('end:', '2018-04-08 08:05:36')
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[&nbsp;]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 3px; margin-bottom: -17px; border-right-width: 13px; min-height: 28px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom: 0px solid transparent; top: 28px;"></div><div class="CodeMirror-gutters" style="display: none; height: 41px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div></div><div class="end_space"></div></div>
        <div id="tooltip" class="ipython_tooltip" style="display:none"><div class="tooltipbuttons"><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" role="button" class="ui-button"><span class="ui-icon ui-icon-close">Close</span></a><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" class="ui-corner-all" role="button" id="expanbutton" title="Grow the tooltip vertically (press shift-tab twice)"><span class="ui-icon ui-icon-plus">Expand</span></a><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" role="button" class="ui-button" title="show the current docstring in pager (press shift-tab 4 times)"><span class="ui-icon ui-icon-arrowstop-l-n">Open in Pager</span></a><a href="http://10.1.131.92:8888/notebooks/Display4Floor.ipynb#" role="button" class="ui-button" title="Tooltip will linger for 10 seconds while you type" style="display: none;"><span class="ui-icon ui-icon-clock">Close</span></a></div><div class="pretooltiparrow"></div><div class="tooltiptext smalltooltip"></div></div>
    </div>
</div>



</div>



<div id="pager" class="ui-resizable">
    <div id="pager-contents">
        <div id="pager-container" class="container"></div>
    </div>
    <div id="pager-button-area"><a role="button" title="Open the pager in an external window" class="ui-button"><span class="ui-icon ui-icon-extlink"></span></a><a role="button" title="Close the pager" class="ui-button"><span class="ui-icon ui-icon-close"></span></a></div>
<div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div></div>






<script type="text/javascript">
    sys_info = {"os_name": "posix", "platform": "Linux-3.10.0-514.16.1.el7.x86_64-x86_64-with-Ubuntu-16.04-xenial", "default_encoding": "ANSI_X3.4-1968", "notebook_path": "/usr/local/lib/python2.7/dist-packages/notebook", "sys_platform": "linux2", "sys_version": "2.7.12 (default, Nov 19 2016, 06:48:10) \n[GCC 5.4.0 20160609]", "notebook_version": "5.0.0", "commit_source": "", "commit_hash": "", "sys_executable": "/usr/bin/python"};
</script>

<script src="./Display4Floor_files/encoding.js.下载" charset="utf-8"></script>

<script src="./Display4Floor_files/main.min.js.下载" type="text/javascript" charset="utf-8"></script>



<script type="text/javascript">
  function _remove_token_from_url() {
    if (window.location.search.length <= 1) {
      return;
    }
    var search_parameters = window.location.search.slice(1).split('&');
    for (var i = 0; i < search_parameters.length; i++) {
      if (search_parameters[i].split('=')[0] === 'token') {
        // remote token from search parameters
        search_parameters.splice(i, 1);
        var new_search = '';
        if (search_parameters.length) {
          new_search = '?' + search_parameters.join('&');
        }
        var new_url = window.location.origin + 
                      window.location.pathname + 
                      new_search + 
                      window.location.hash;
        window.history.replaceState({}, "", new_url);
        return;
      }
    }
  }
  _remove_token_from_url();
</script>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: STIXMathJax_Main, sans-serif;"></div></div></body></html>